{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\devor\\\\Documents\\\\NodeChat\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useDispatch,useSelector,connect}from'react-redux';import{AppendMessage,justJoined,isTyping,notTyping}from'./redux/actions/chatActions';import io from'socket.io-client';import{store}from'./redux/store';var socket=io();socket.on('online',function(data){console.log(data.description);});socket.on('joined',function(data){store.dispatch(justJoined(data.success));});socket.on('typing',function(data){store.dispatch(isTyping(data));});socket.on('chat',function(data){store.dispatch(AppendMessage(data));});socket.on('no_typing',function(data){store.dispatch(notTyping(data));});function App(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),handle=_useState2[0],setHandle=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),textArea=_useState4[0],setTextArea=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];useEffect(function(){socket.emit('online',{description:'user._id: 1234567890'});},[]);var handleTyping=function handleTyping(){socket.emit('typing',{'handle':handle});};var noMoreTyping=function noMoreTyping(){socket.emit('no_typing',{'handle':handle});};var handleSubmit=function handleSubmit(handle,message){if(handle===''||message===''){setError('Handle or message should not be null');return;}setError('');socket.emit('chat',{'handle':handle,'message':message});};return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(\"header\",{className:\"App-header\"},/*#__PURE__*/React.createElement(\"img\",{src:props.logo,className:\"App-logo\"})),/*#__PURE__*/React.createElement(\"div\",{id:\"main\"},/*#__PURE__*/React.createElement(\"div\",{id:\"status\"},props.joined?/*#__PURE__*/React.createElement(\"em\",null,\"You are connected\"):/*#__PURE__*/React.createElement(\"em\",null,\"You were denied connection\")),/*#__PURE__*/React.createElement(\"div\",{id:\"message\",className:\"container\"},/*#__PURE__*/React.createElement(\"h1\",null,/*#__PURE__*/React.createElement(\"em\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"Chat messages\"))),props.typist?/*#__PURE__*/React.createElement(\"h2\",null,props.typist,\" is typing\"):null,props.messages.length===0?/*#__PURE__*/React.createElement(\"h3\",null,/*#__PURE__*/React.createElement(\"em\",null,\"No messages\")):null,props.messages.map(function(item,index){return/*#__PURE__*/React.createElement(\"div\",{key:index,className:\"row\"},/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(\"strong\",null,item.handle,\":\")),\"\\xA0\",/*#__PURE__*/React.createElement(\"div\",null,item.message));})),/*#__PURE__*/React.createElement(\"div\",{id:\"form\"},/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"fieldset\",null,/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"handleField\"},\"Handle\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"handleField\",placeholder:\"Handle\",value:handle,onChange:function onChange(e){return setHandle(e.target.value);}}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"messageField\"},\"Message\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"type a message\",id:\"messageField\",value:textArea,onChange:function onChange(e){setTextArea(e.target.value);if(e.target.value!==''){handleTyping();}else{noMoreTyping();}}}),/*#__PURE__*/React.createElement(\"input\",{className:\"button-primary\",type:\"submit\",value:\"send\",onClick:function onClick(e){e.preventDefault();handleSubmit(handle,textArea);setTextArea('');noMoreTyping();}}))),error?/*#__PURE__*/React.createElement(\"blockquote\",null,/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"em\",null,\"Error: \",error))):null)));}var mapStateToProps=function mapStateToProps(state){var _state$chatReducer=state.chatReducer,messages=_state$chatReducer.messages,typist=_state$chatReducer.typist,joined=_state$chatReducer.joined;return{messages:messages,typist:typist,joined:joined};};export default connect(mapStateToProps)(App);","map":{"version":3,"sources":["C:/Users/devor/Documents/NodeChat/client/src/App.js"],"names":["React","useState","useEffect","useDispatch","useSelector","connect","AppendMessage","justJoined","isTyping","notTyping","io","store","socket","on","data","console","log","description","dispatch","success","App","props","handle","setHandle","textArea","setTextArea","error","setError","emit","handleTyping","noMoreTyping","handleSubmit","message","logo","joined","typist","messages","length","map","item","index","e","target","value","preventDefault","mapStateToProps","state","chatReducer"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useDispatch, useSelector, connect } from 'react-redux'\nimport { AppendMessage, justJoined, isTyping, notTyping } from './redux/actions/chatActions';\nimport io from 'socket.io-client';\nimport { store } from './redux/store';\n\nconst socket = io();\n\nsocket.on('online', data => {\n  console.log(data.description);\n})\n\nsocket.on('joined', data => {\n  store.dispatch(justJoined(data.success));\n});\nsocket.on('typing', data => {\n  store.dispatch(isTyping(data));\n});\nsocket.on('chat', data => {\n  store.dispatch(AppendMessage(data));\n});\nsocket.on('no_typing', data => {\n  store.dispatch(notTyping(data));\n})\n\nfunction App(props) {\n  const [handle, setHandle] = useState('');\n  const [textArea, setTextArea] = useState('');\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    socket.emit('online', { description: 'user._id: 1234567890' })\n  }, []);\n\n  const handleTyping = () => {\n    socket.emit('typing', {\n      'handle': handle,\n    });\n  };\n\n  const noMoreTyping = () => {\n    socket.emit('no_typing', {\n      'handle': handle,\n    });\n  };\n\n  const handleSubmit = (handle, message) => {\n    if (handle === '' || message === '') {\n      setError('Handle or message should not be null');\n      return\n    }\n    setError('');\n    socket.emit('chat', {\n      'handle': handle,\n      'message': message,\n    })\n  }\n\n  return (\n    <div className='App'>\n      <header className='App-header'>\n        <img src={props.logo} className='App-logo' />\n      </header>\n      <div id='main'>\n        <div id='status'>\n          {props.joined ? <em>You are connected</em> : <em>You were denied connection</em>}\n        </div>\n        <div id='message' className='container'>\n          <h1><em><strong>Chat messages</strong></em></h1>\n          {props.typist ? <h2>{props.typist} is typing</h2> : null}\n          {props.messages.length === 0 ? <h3><em>No messages</em></h3> : null}\n          {props.messages.map((item, index) => {\n            return (\n              <div key={index} className='row'>\n                <span><strong>{item.handle}:</strong></span>&nbsp;\n                <div>\n                  {item.message}\n                </div>\n              </div>\n            )\n          })}\n        </div>\n        <div id='form'>\n          <form>\n            <fieldset>\n              <label htmlFor='handleField'>Handle</label>\n              <input type='text' id='handleField' placeholder='Handle' value={handle} onChange={(e) => setHandle(e.target.value)} />\n              <label htmlFor='messageField'>Message</label>\n              <input type='text' placeholder='type a message' id='messageField' value={textArea} onChange={(e) => {\n                setTextArea(e.target.value);\n                if (e.target.value !== '') {\n                  handleTyping();\n                } else {\n                  noMoreTyping();\n                }\n              }} />\n              <input className='button-primary' type='submit' value='send' onClick={e => {\n                e.preventDefault();\n                handleSubmit(handle, textArea);\n                setTextArea('');\n                noMoreTyping();\n              }} />\n            </fieldset>\n          </form>\n          {error ? <blockquote>\n            <p><em>Error: {error}</em></p>\n          </blockquote> : null}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nconst mapStateToProps = state=>{\n  const{messages, typist, joined} = state.chatReducer;\n  return{\n    messages,\n    typist,\n    joined,\n  }\n}\n\n\nexport default connect(mapStateToProps)(App);\n"]},"metadata":{},"sourceType":"module"}